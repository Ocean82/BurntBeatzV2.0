import { useState } from \"react\"\n\nconst DEFAULT_BEAT = Array(16).fill([false, false, false, false]) // 4 drum sounds, 16 steps\nconst DEFAULT_CHORDS = [\"C\", \"G\", \"Am\", \"F\"]\n\nexport function useStudioState() {\n  const [tracks, setTracks] = useState([\n    { id: 1, type: \"melody\", instrument: \"Piano\", notes: [] }\n  ])\n  const [tempo, setTempo] = useState(120)\n  const [beatPattern, setBeatPattern] = useState(DEFAULT_BEAT)\n  const [chordProgression, setChordProgression] = useState(DEFAULT_CHORDS)\n  const [selectedTrack, setSelectedTrack] = useState(1)\n\n  function addTrack(instrument: string) {\n    setTracks(tracks => [\n      ...tracks,\n      { id: Date.now(), type: \"custom\", instrument, notes: [] }\n    ])\n  }\n\n  function toggleBeat(step: number, drum: number) {\n    setBeatPattern(pattern =>\n      pattern.map((row, i) =>\n        i === step\n          ? row.map((on, j) => (j === drum ? !on : on))\n          : row\n      )\n    )\n  }\n\n  function setChord(index: number, chord: string) {\n    setChordProgression(chords =>\n      chords.map((c, i) => (i === index ? chord : c))\n    )\n  }\n\n  return {\n    tracks, setTracks,\n    tempo, setTempo,\n    addTrack,\n    beatPattern, setBeatPattern, toggleBeat,\n    chordProgression, setChordProgression, setChord,\n    selectedTrack, setSelectedTrack\n  }\n}\n
